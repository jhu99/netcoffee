################################################################################
AUTHOR: JIALU HU
EMAIL: jialu.hu@fu-berlin.de

################################################################################
Description
This file is README file of the package of NetCoffee, developed by Jialu Hu.
To guide you quickly starting to use our alignment tool, we structured this README into four parts:
1) PREREQUISITE
2) COMPILING
3) OPTION
4) EXAMPLE 
Before running this program, you are strongly recommended to read this file carefully.

################################################################################
PREREQUISITE
1. LEMON Graph Library 1.2.3
The source code is freely available under Boost Software License, Version 1.0 at the website: http://lemon.cs.elte.hu/trac/lemon/wiki/Downloads
Please first compile the lemon graph library before compiling the code of NetCoffee.
Note that this package should move to the directory $NETCOFFEE/include.
2. FSST package
This package is necessary only if you want to use "-analyse" option to calculate the semantic similarities.
It can be download at http://gotax.bioinf.mpi-inf.mpg.de/avail.php.
3. GoTermFinder
This package is necessary only if you want to use "-analyse" option to draw the GoTree View or calculate p-Value of each match-set.
It can be download at http://search.cpan.org/dist/GO-TermFinder/lib/GO/TermFinder.pm.

################################################################################
COMPILING
To compile the source code, the latest compilers which supports the standard language C++11, also known as C++0x, is needed. Other older compiler may not support it.
1. Compile LEMON GRAPH LIBRARY

cd $NETCOFFEE/include/lemon-1.2.3/
./configure
./make

2. Compile NetCoffee

cd $NETCOFFEE
./make MODE=Release
#If you want to compile it in Debug mode, run command:
./make (MODE=Debug)

################################################################################
OPTION
You can see the detailed option information with option "-h".
It is noted that there are two options you must specify if you want to run NetCoffee for an alignment task. They are described as follows:

1. -profile
The default file is "./profile.input", but you can also change the filename and path by "-profile" option.
This file tells the program where to find the dataset and to create output files.
It is expected to be in two-column tab-delimited format.
These lines starting with "#" will be seen as comment.
Each line has one keyword and one value, like this:
$keyword	$value
Using this file, you are allowed to set options (network,gofile,efile,alignmentfile,avefunsimfile,scorefile,logfile) here.
However, you are also allowed to set these option in command line, except for these keywords: network, gofile, efile, which containing multiple files.
Note that, the values must be strictly in order from up to down for keywords "network, gofile, efile".
For example, suppose we have
three PPI networ:1.tab, 2.tab, 3.tab,
go association file: 1.fsst, 2.fsst, 3.fsst,
six balst value files: 1-1.cf, 1-2.cf,...,3-3.cf,
then the profile should looks like:
--------------BEGIN OF PROFILE--------------
#COMMENT $keyword	$value
network  ./dataset/1.tab
network  ./dataset/2.tab
network  ./dataset/3.tab
gofile  ./dataset/goa/1.fsst
gofile  ./dataset/goa/2.fsst
gofile  ./dataset/goa/3.fsst
efile  ./dataset/1-1.cf
efile  ./dataset/1-2.cf
efile  ./dataset/1-3.cf
efile  ./dataset/2-2.cf
efile  ./dataset/2-3.cf
efile  ./dataset/3-3.cf
scorefile     ./dataset/score_composit_4s.model
alignmentfile ./result/alignment_netcoffee.data
avefunsimfile netcoffee_fsst.result
logfile       ./result/measure_time.txt
--------------BEGIN OF PROFILE--------------


2. -scorefile
The default file is "./dataset/score_composit.model". This file was empirically obtained from blastp scoring files for othologous model and null model.
You can run commandline with option "-record -task 0" to generate this data with blastp scoring files.

3. other option in Usage

You can generate the following message by running the program with option "-h".

$NETCOFFEE/bin/aligner -h
Usage:
  ./bin/aligner -version|-records|-alignment|-analyse|-format
     [--help|-h|-help] [-alignmentfile str] [-alpha num] [-avefunsimfile str]
     [-beta num] [-distributionfile str] [-edgefactor num] [-formatfile str]
     [-nmax int] [-numspecies int] [-orthologyfile str] [-out] [-profile str]
     [-randomfile str] [-recordsfile str] [-resultfolder str] [-task int]
     [-threshold num]
Where:
  --help|-h|-help
     Print a short help message
  -alignment
     Execute the alignment algorithm.
  -alignmentfile str
     The filename of alignment which is required to either create or analyse.
  -alpha num
     Prameter controlling how much sequence similarity contributes. Default is 0.5.
  -analyse
     Make analysis on alignmenr result.
  -avefunsimfile str
     The filename for functional similarity of alignment.
  -beta num
     Probability for randomly picking out the alignment records. Default is 1.0
  -distributionfile str
     Output file for log ratio distribution.
  -edgefactor num
     The factor of the power law normalization. Default is 0.1.
  -format
     Process input or output file into proper format.
  -formatfile str
     Profile of input parameters.
  -nmax int
     The parameter for SA algorithm N.
  -numspecies int
     Number of the species compared. Default is 4.
  -orthologyfile str
     Training data for orthology model.
  -out
     Print the alignment result into file.
  -profile str
     Profile of input parameters.
  -randomfile str
     Training data for random model.
  -records
     Generate alignment records file.
  -recordsfile str
     Records file for writing and reading. It is used to store the triplet edges in NetCoffee program.
  -resultfolder str
     The folder which was used as active folder in the data process.
  -task int
     Complete different tasks. It must be used with -alignment option together.
  -threshold num
     Threshold gamma which is used to exclude match-sets with score below a certain value. Default is 0.0.
  -version
     Show the version number.

################################################################################
EXAMPLE
1. Download dataset
Our dataset is freely available at our website: https://code.google.com/p/netcoffee/downloads/list.
Download it into the folder of $NETCOFFEE and uncompress it with command:
tar -zxvf dataset.tar.gz
2. Compile source code
Compile the source code with command:
make MODE=Release
3. Run NetCoffee on the dataset with command:
./bin/aligner -alignment -task 1 -out -alpha ${ALPHA} -alignmentfile ./result/alignment_netcoffee.data -resultfolder ./result/
${ALPHA} is the parameter you want to specify for alpha.
Then you can find the all the involved output files in ./result/ .
There are many other functions which you can see with "-help" option.

################################################################################
END
THANKS FOR READING
If you have any questions regarding to the program, please don't hesitate to contact us through email.
